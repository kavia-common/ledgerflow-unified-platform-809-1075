{"is_source_file": true, "format": "JavaScript", "description": "This file contains service functions related to workspaces in a backend application, including role management, workspace creation, retrieval, updating, deletion, and member handling.", "external_files": ["../lib/prisma", "@prisma/client"], "external_methods": ["prisma.workspace.findUnique", "prisma.membership.findUnique", "prisma.workspace.findMany", "prisma.$transaction", "prisma.workspace.create", "prisma.membership.create", "prisma.workspace.update", "prisma.workspace.delete", "prisma.membership.findMany", "prisma.user.findUnique", "prisma.membership.upsert"], "published": ["listWorkspaces", "createWorkspace", "getWorkspace", "updateWorkspace", "deleteWorkspace", "listMembers", "inviteMember", "requireWorkspaceRole"], "classes": [], "methods": [{"name": "requireWorkspaceRole(userId, workspaceId, requiredRole = 'VIEWER')", "description": "Checks if a user has at least the required role in a workspace; throws error if not authorized.", "scope": "", "scopeKind": ""}, {"name": "listWorkspaces(userId)", "description": "Returns a list of workspaces where the user is a member.", "scope": "", "scopeKind": ""}, {"name": "createWorkspace(userId, { name, slug, description })", "description": "Creates a new workspace and assigns the creator as OWNER, including initial membership.", "scope": "", "scopeKind": ""}, {"name": "getWorkspace(userId, workspaceId)", "description": "Retrieve details of a workspace if the user is a member.", "scope": "", "scopeKind": ""}, {"name": "updateWorkspace(userId, workspaceId, { name, description, slug })", "description": "Updates workspace details; requires ADMIN or higher.", "scope": "", "scopeKind": ""}, {"name": "deleteWorkspace(userId, workspaceId)", "description": "Deletes a workspace; requires OWNER.", "scope": "", "scopeKind": ""}, {"name": "listMembers(userId, workspaceId)", "description": "Lists all members and their roles in a workspace; requires ADMIN or higher.", "scope": "", "scopeKind": ""}, {"name": "inviteMember(userId, workspaceId, { email, role = 'VIEWER' })", "description": "Invites a user to a workspace by email; creates or updates membership if user exists.", "scope": "", "scopeKind": ""}], "calls": ["prisma.workspace.findUnique", "prisma.membership.findUnique", "prisma.workspace.findMany", "prisma.$transaction", "prisma.workspace.create", "prisma.membership.create", "prisma.workspace.update", "prisma.workspace.delete", "prisma.membership.findMany", "prisma.user.findUnique", "prisma.membership.upsert"], "search-terms": ["workspace management", "role hierarchy", "workspace membership", "CRUD workspace", "invite by email"], "state": 2, "file_id": 20, "knowledge_revision": 49, "git_revision": "", "ctags": [{"_type": "tag", "name": "ADMIN", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  ADMIN: 4,$/", "language": "JavaScript", "kind": "property", "scope": "ROLE_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "DEVELOPER", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  DEVELOPER: 2,$/", "language": "JavaScript", "kind": "property", "scope": "ROLE_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "MAINTAINER", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  MAINTAINER: 3,$/", "language": "JavaScript", "kind": "property", "scope": "ROLE_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "OWNER", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  OWNER: 5,$/", "language": "JavaScript", "kind": "property", "scope": "ROLE_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "ROLE_ORDER", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^const ROLE_ORDER = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "VIEWER", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  VIEWER: 1,$/", "language": "JavaScript", "kind": "property", "scope": "ROLE_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "createWorkspace", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function createWorkspace(userId, { name, slug, description }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, { name, slug, description })"}, {"_type": "tag", "name": "deleteWorkspace", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function deleteWorkspace(userId, workspaceId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId)"}, {"_type": "tag", "name": "getWorkspace", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function getWorkspace(userId, workspaceId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId)"}, {"_type": "tag", "name": "inviteMember", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function inviteMember(userId, workspaceId, { email, role = 'VIEWER' }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, { email, role = 'VIEWER' })"}, {"_type": "tag", "name": "listMembers", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function listMembers(userId, workspaceId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId)"}, {"_type": "tag", "name": "listWorkspaces", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^  listWorkspaces,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listWorkspaces", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function listWorkspaces(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}, {"_type": "tag", "name": "prisma", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^const prisma = require('..\\/lib\\/prisma');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "requireWorkspaceRole", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function requireWorkspaceRole(userId, workspaceId, requiredRole = 'VIEWER') {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, requiredRole = 'VIEWER')"}, {"_type": "tag", "name": "updateWorkspace", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/workspaces.js", "pattern": "/^async function updateWorkspace(userId, workspaceId, { name, description, slug }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, { name, description, slug })"}], "hash": "edb5df2610dcfce3b9dcfa0e750fb6fc", "format-version": 4, "code-base-name": "ledgerflow_backend_api", "filename": "ledgerflow_backend_api/src/services/workspaces.js", "fields": [{"name": "ADMIN: 4,", "scope": "ROLE_ORDER", "scopeKind": "class", "description": "unavailable"}, {"name": "DEVELOPER: 2,", "scope": "ROLE_ORDER", "scopeKind": "class", "description": "unavailable"}, {"name": "MAINTAINER: 3,", "scope": "ROLE_ORDER", "scopeKind": "class", "description": "unavailable"}, {"name": "OWNER: 5,", "scope": "ROLE_ORDER", "scopeKind": "class", "description": "unavailable"}, {"name": "VIEWER: 1,", "scope": "ROLE_ORDER", "scopeKind": "class", "description": "unavailable"}, {"name": "listWorkspaces,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"49": ""}]}