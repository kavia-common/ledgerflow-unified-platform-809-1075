{"is_source_file": true, "format": "JavaScript", "description": "This file defines functions for managing environment entities within a project, including listing, retrieving, creating, updating, and deleting environments. It relies on Prisma ORM for database operations and enforces role-based access control.", "external_files": ["../lib/prisma", "./workspaces"], "external_methods": ["requireWorkspaceRole"], "published": ["listEnvironments", "getEnvironment", "createEnvironment", "updateEnvironment", "deleteEnvironment"], "classes": [], "methods": [{"name": "listEnvironments(userId, workspaceId, projectId)", "description": "Lists all environments associated with a specific project within a workspace, requiring at least a VIEWER role.", "scope": "", "scopeKind": ""}, {"name": "getEnvironment(userId, workspaceId, projectId, environmentId)", "description": "Retrieves details of a specific environment by ID, verifying access permissions.", "scope": "", "scopeKind": ""}, {"name": "createEnvironment(userId, workspaceId, projectId, { name, type, url, status, configJson })", "description": "Creates a new environment under a given project, requiring MAINTAINER or higher role, with validation for duplicates.", "scope": "", "scopeKind": ""}, {"name": "updateEnvironment(userId, workspaceId, projectId, environmentId, { name, type, url, status, configJson })", "description": "Performs partial updates on an environment record, ensuring name uniqueness and permissions.", "scope": "", "scopeKind": ""}, {"name": "deleteEnvironment(userId, workspaceId, projectId, environmentId)", "description": "Deletes an environment, requiring ADMIN or higher role, with existence check.", "scope": "", "scopeKind": ""}], "calls": ["../lib/prisma.project.findFirst", "../lib/prisma.environment.findMany", "../lib/prisma.environment.findFirst", "../lib/prisma.environment.findUnique", "../lib/prisma.environment.create", "../lib/prisma.environment.update", "../lib/prisma.environment.delete"], "search-terms": ["environments", "projectId", "workspaceId", "Environment management", "prisma ORM", "role-based access control"], "state": 2, "file_id": 30, "knowledge_revision": 77, "git_revision": "", "ctags": [{"_type": "tag", "name": "createEnvironment", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^async function createEnvironment(userId, workspaceId, projectId, { name, type, url, status, conf/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, projectId, { name, type, url, status, configJson })"}, {"_type": "tag", "name": "deleteEnvironment", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^async function deleteEnvironment(userId, workspaceId, projectId, environmentId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, projectId, environmentId)"}, {"_type": "tag", "name": "getEnvironment", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^async function getEnvironment(userId, workspaceId, projectId, environmentId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, projectId, environmentId)"}, {"_type": "tag", "name": "listEnvironments", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^  listEnvironments,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listEnvironments", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^async function listEnvironments(userId, workspaceId, projectId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, projectId)"}, {"_type": "tag", "name": "prisma", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^const prisma = require('..\\/lib\\/prisma');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateEnvironment", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/services/environments.js", "pattern": "/^async function updateEnvironment(userId, workspaceId, projectId, environmentId, { name, type, ur/", "language": "JavaScript", "kind": "function", "signature": "(userId, workspaceId, projectId, environmentId, { name, type, url, status, configJson })"}], "hash": "5b9f1d4b9774c2cf828367ae153db604", "format-version": 4, "code-base-name": "ledgerflow_backend_api", "filename": "ledgerflow_backend_api/src/services/environments.js", "fields": [{"name": "listEnvironments,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"77": ""}]}