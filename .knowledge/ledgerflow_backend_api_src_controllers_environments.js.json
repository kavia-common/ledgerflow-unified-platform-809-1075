{"is_source_file": true, "format": "JavaScript", "description": "This file defines the EnvironmentsController class, which handles CRUD operations for project environments such as listing, retrieving, creating, updating, and deleting environments. It interacts with an external environmentsService for data operations.", "external_files": ["../services/environments"], "external_methods": ["environmentsService.listEnvironments", "environmentsService.getEnvironment", "environmentsService.createEnvironment", "environmentsService.updateEnvironment", "environmentsService.deleteEnvironment"], "published": ["new EnvironmentsController()"], "classes": [{"name": "EnvironmentsController", "description": "Controller class managing CRUD endpoints for project environments."}], "methods": [{"name": "list(req, res)", "description": "Lists all environments for a specific project, requiring viewer permissions.", "scope": "EnvironmentsController", "scopeKind": "class"}, {"name": "get", "description": "Retrieves details of a single environment by its ID."}, {"name": "create", "description": "Creates a new environment with provided parameters, requiring maintainer permissions."}, {"name": "update", "description": "Updates an existing environment identified by ID."}, {"name": "remove", "description": "Deletes the specified environment, requiring admin permissions."}], "calls": ["environmentsService.listEnvironments", "environmentsService.getEnvironment", "environmentsService.createEnvironment", "environmentsService.updateEnvironment", "environmentsService.deleteEnvironment"], "search-terms": ["EnvironmentsController", "environmentsService", "CRUD", "project environments", "Node.js API controller"], "state": 2, "file_id": 31, "knowledge_revision": 79, "git_revision": "", "ctags": [{"_type": "tag", "name": "EnvironmentsController", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^class EnvironmentsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "environmentId", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const { workspaceId, projectId, environmentId } = req.params;$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "environmentsService", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^const environmentsService = require('..\\/services\\/environments');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^module.exports = new EnvironmentsController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^  async list(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "projectId", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const { workspaceId, projectId, environmentId } = req.params;$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^  async get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^  async get(req, res) {$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const result = await environmentsService.createEnvironment(userId, workspaceId, projectId,/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const result = await environmentsService.deleteEnvironment(userId, workspaceId, projectId,/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const result = await environmentsService.getEnvironment(userId, workspaceId, projectId, en/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const result = await environmentsService.updateEnvironment($/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const status = err.status || 500;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const userId = req.user?.sub;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const userId = req.user?.sub;$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}, {"_type": "tag", "name": "workspaceId", "path": "/home/kavia/workspace/code-generation/ledgerflow-unified-platform-809-1075/ledgerflow_backend_api/src/controllers/environments.js", "pattern": "/^      const { workspaceId, projectId, environmentId } = req.params;$/", "language": "JavaScript", "kind": "field", "scope": "EnvironmentsController", "scopeKind": "class"}], "hash": "9c5798fd4ce84d1e2361ed5d30c1ea3e", "format-version": 4, "code-base-name": "ledgerflow_backend_api", "filename": "ledgerflow_backend_api/src/controllers/environments.js", "fields": [{"name": "const { workspaceId, projectId, environmentId } = req.params;", "scope": "EnvironmentsController", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new EnvironmentsController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(req, res) {", "scope": "EnvironmentsController", "scopeKind": "class", "description": "unavailable"}, {"name": "const userId = req.user?.sub;", "scope": "EnvironmentsController", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"79": ""}]}